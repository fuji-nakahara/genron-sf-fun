<% provide :title, 'Admin' %>

<section class="mb-3">
  <header>
    <h2>ユーザー</h2>
  </header>
  <table class="table table-striped table-sm">
    <thead>
      <tr>
        <th>Twitter アカウント</th>
        <th>作成日時</th>
        <th>最終ログイン日時</th>
      </tr>
    </thead>
    <tbody>
      <% @users.each do |user| %>
        <tr>
          <td>
            <%= link_to twitter_profile_url(user.twitter_screen_name), target: '_blank' do %>
              <%= image_tag user.image_url, size: '24x24', class: 'border rounded-circle' %>
              <%= user.twitter_screen_name %>
            <% end %>
          </td>
          <td><%= localize user.created_at %></td>
          <td><%= localize user.last_logged_in_at %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</section>

<hr>

<section class="mb-3">
  <header>
    <h2>受講生マージ</h2>
  </header>
  <%= form_with url: merge_admin_students_path, local: true do |form| %>
    <div class="mb-3">
      <%= form.label :genron_sf_id, 'genron_sf_student_id', class: 'form-label' %>
      <%= form.text_field :genron_sf_id, list: 'genron_sf_student_ids', class: 'form-control' %>
      <datalist id="genron_sf_student_ids">
        <% @genron_sf_student_ids.each do |genron_sf_student_id| %>
          <option value="<%= genron_sf_student_id %>"></option>
        <% end %> %>
      </datalist>
    </div>
    <div class="mb-3">
      <%= form.label :twitter_screen_name, 'twitter_screen_names', class: 'form-label' %>
      <%= form.text_field :twitter_screen_name, class: 'form-control' %>
      <datalist id="twitter_screen_names">
        <% @twitter_screen_names.each do |twitter_screen_name| %>
          <option value="<%= twitter_screen_name %>"></option>
        <% end %> %>
      </datalist>
    </div>
    <%= form.submit '実行', class: 'btn btn-primary' %>
  <% end %>
</section>
